- name: "Add APT repository (loop)"
  include_tasks: add_repo.yml
  loop: "{{ apt_repos }}"
  loop_control:
    loop_var: repo

- name: Purge APT packages
  become: true
  apt:
    pkg: "{{ apt_pkgs_purge }}"
    state: absent
    purge: yes

- name: Install APT packages
  become: true
  apt:
    pkg: "{{ apt_pkgs_install }}"
    state: present

- name: Remove dependencies that are no longer required
  become: true
  apt:
    autoremove: yes
